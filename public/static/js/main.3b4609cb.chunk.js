(this["webpackJsonpcleanvel-front"]=this["webpackJsonpcleanvel-front"]||[]).push([[0],{49:function(e,a,t){e.exports=t(79)},54:function(e,a,t){},56:function(e,a,t){},79:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),l=t(21),c=t.n(l),u=(t(54),t(42)),s=t.n(u),m=(t(55),t(43)),o=t.n(m),i=(t(56),t(1)),d=t(6),E=t(23),p=t(2),k=t(12),v=t.n(k),f="https://cleanvel.herokuapp.com/api";v.a.defaults.withCredentials=!0;var b="cleanvel/user/LOADING",g="cleanvel/user/LOGIN_SUCCESS",N="cleanvel/user/LOGIN_ERROR",h="cleanvel/user/LOGOUT_SUCCESS",O={data:JSON.parse(localStorage.getItem("user")),status:"",error:void 0};var y=function(e){return function(a){return a({type:b}),v.a.post("".concat(f,"/login"),e).then((function(e){var t=e.data.user;localStorage.setItem("user",JSON.stringify(t)),a({type:g,payload:t})})).catch((function(e){return a((t=e.response.data,{type:N,error:t}));var t}))}},S=function(){return function(e){return v.a.post("".concat(f,"/logout")).then((function(){localStorage.removeItem("user"),e({type:h})}))}},_=t(7);function w(){var e=Object(d.a)(["\ncolor:red;\nfont-size: 15px;\n"]);return w=function(){return e},e}var j=_.a.div(w()),x=function(){var e=Object(i.b)(),a=Object(E.a)({mode:"onBlur"}),t=a.register,n=a.handleSubmit,l=a.errors;return r.a.createElement("div",{className:"authform-background"},r.a.createElement("div",{className:"authform"},r.a.createElement("div",{className:"uk-card uk-card-default uk-grid-collapse uk-child-width-1-2@s uk-margin uk-width-3xlarge","uk-grid":"true"},r.a.createElement("div",{className:"uk-card-media-left uk-cover-container"},r.a.createElement("img",{src:"/images/cleanvel-login.jpeg",alt:"","uk-cover":"true"})),r.a.createElement("div",{className:"uk-card-body"},r.a.createElement("form",{onSubmit:n((function(a){e(y(a))}))},r.a.createElement("div",null,r.a.createElement("img",{src:"/images/cleanvel-logo.png",alt:""})),r.a.createElement("div",{className:"uk-margin"},r.a.createElement("div",{className:"uk-inline"},r.a.createElement("span",{className:"uk-form-icon","uk-icon":"icon: user"}),r.a.createElement("input",{className:"uk-input",name:"username",type:"text",ref:t({required:!0})})),l.username&&r.a.createElement(j,null,"El usuario es requerido")),r.a.createElement("div",{className:"uk-margin"},r.a.createElement("div",{className:"uk-inline"},r.a.createElement("span",{className:"uk-form-icon uk-form-icon-flip","uk-icon":"icon: lock"}),r.a.createElement("input",{className:"uk-input",name:"password",type:"password",ref:t({required:!0})})),l.password&&r.a.createElement(j,null,"La contrase\xf1a es requerida")),r.a.createElement("button",{className:"uk-button uk-button-default"},"Login"))))))},C=t(19),R=t(15),U=t.n(R),A=(t(41),t(22)),I=t.n(A);function L(){var e=Object(d.a)(["\ncolor: rgb(17, 107, 9);\nfont-weight: 500;\n"]);return L=function(){return e},e}function T(){var e=Object(d.a)(["\nalign-items: center;\ntext-align: center;\ncolor: rgb(7, 9, 48);\n"]);return T=function(){return e},e}function D(){var e=Object(d.a)(["\nalign-items: center;\n"]);return D=function(){return e},e}U.a.extend(I.a);var z=_.a.div(D()),G=_.a.div(T()),q=_.a.h3(L()),M=function(){var e=Object(i.c)((function(e){return e.user.data}));return r.a.createElement(z,{className:"uk-card"},r.a.createElement(G,{className:"uk-card-body"},r.a.createElement("img",{className:"uk-border-circle uk-align-center",width:"90",height:"90",src:e.profile_picture?e.profile_picture:"/images/cleanvel-logo-letter.png",alt:e.name}),r.a.createElement(q,{className:"uk-card-title uk-margin-remove"},e.name," ",e.last_name),r.a.createElement("p",{className:"uk-margin-remove"},"Usuario: ",e.username),r.a.createElement("p",{className:"uk-margin-remove"},"Activo desde ",U()(e.createdAt).locale("es").format("MMMM YYYY")),r.a.createElement("button",{className:"uk-margin-top uk-button"},"Editar")))},Y=function(e){var a=Object(i.b)();return r.a.createElement("nav",{className:"uk-navbar uk-navbar-container","uk-navbar":"true"},r.a.createElement("div",{className:"uk-navbar-left uk-margin-left"},r.a.createElement("div",null,r.a.createElement("a",{className:"uk-navbar-toggle",href:"/"},r.a.createElement("span",{"uk-navbar-toggle-icon":"true"})),r.a.createElement("div",{"uk-dropdown":"mode: click"},r.a.createElement("ul",{className:"uk-nav uk-dropdown-nav"},r.a.createElement("li",{className:"uk-active nav-name-text"},r.a.createElement(C.b,{className:"uk-text-capitalize",to:"/usuarios"},r.a.createElement("span",{className:"uk-margin-small-right","uk-icon":"users"}),r.a.createElement("span",{className:"nav-name-text"},"Usuarios"))),r.a.createElement("li",{className:"uk-active nav-name-text"},r.a.createElement("a",{className:"uk-text-capitalize",href:"/"},r.a.createElement("span",{className:"uk-margin-small-right","uk-icon":"location"}),r.a.createElement("span",{className:"nav-name-text"},"Tiendas"))),r.a.createElement("li",{className:"uk-active nav-name-text"},r.a.createElement("a",{className:"uk-text-capitalize",href:"/"},r.a.createElement("span",{className:"uk-margin-small-right","uk-icon":"list"}),r.a.createElement("span",{className:"nav-name-text"},"Inventario"))),r.a.createElement("li",{className:"uk-active nav-name-text"},r.a.createElement("a",{className:"uk-text-capitalize",href:"/"},r.a.createElement("span",{className:"uk-margin-small-right","uk-icon":"cart"}),r.a.createElement("span",{className:"nav-name-text"},"Ventas"))),r.a.createElement("li",{className:"uk-active nav-name-text"},r.a.createElement("a",{className:"uk-text-capitalize",href:"/"},r.a.createElement("span",{className:"uk-margin-small-right","uk-icon":"folder"}),r.a.createElement("span",{className:"nav-name-text"},"Reportes")))))),r.a.createElement("span",{className:"nav-name-text"},"Menu")),r.a.createElement("div",{className:"uk-navbar-center"},r.a.createElement(C.b,{to:"/"},r.a.createElement("img",{src:"/images/cleanvel-logo.png",width:280,alt:"logo","uk-img":"true"}))),r.a.createElement("div",{className:"uk-navbar-right"},r.a.createElement("ul",{className:"uk-navbar-nav"},r.a.createElement("li",null,r.a.createElement("a",{className:"uk-text-capitalize uk-navbar-toggle",href:"/"},r.a.createElement("span",{className:"nav-name-text"},e.user.name," "),r.a.createElement("span",{className:"uk-margin-small-left","uk-icon":"user"})),r.a.createElement("div",{className:"profile-card uk-margin-remove uk-padding-remove","uk-dropdown":"mode: click"},r.a.createElement(M,null))),r.a.createElement("li",null,r.a.createElement("a",{className:"uk-text-capitalize",href:"/",onClick:function(){a(S())}},r.a.createElement("span",{className:"nav-name-text"},"Salir"),r.a.createElement("span",{className:"uk-margin-small-left","uk-icon":"sign-out"}))))))},J=function(){var e=Object(i.c)((function(e){return e.user.data}));return r.a.createElement("div",{className:"home"},!e&&r.a.createElement(x,null),e&&r.a.createElement(Y,{user:e}))},P=t(3),B=t(4),F="cleanvel/products/GET_USERS_SUCCESS",H="cleanvel/products/GET_USERS_ERROR",V="cleanvel/products/CREATE_USER_ERROR",W="cleanvel/products/EDIT_USER_SUCCESS",X="cleanvel/products/EDIT_USER_ERROR",$="cleanvel/products/DELETE_USER_ERROR",K="cleanvel/products/SEARCH_USER_ERROR",Q={users:{},status:"",error:void 0};var Z=function(e){return{type:"cleanvel/products/DELETE_USER_SUCCESS",payload:e}},ee=function(){return function(e){return e({type:"cleanvel/products/LOADING"}),v.a.get("".concat(f,"/users")).then((function(a){var t=a.data.users.reduce((function(e,a){return Object(p.a)({},e,Object(B.a)({},a._id,a))}),{});e({type:F,payload:t})})).catch((function(a){e({type:H,error:a})}))}},ae=function(e){return function(a){return a({type:"cleanvel/products/LOADING"}),v.a.post("".concat(f,"/users"),e,{headers:{"Content-Type":"multipart/form-data"}}).then((function(e){a({type:"cleanvel/products/CREATE_USER_SUCCESS",payload:e.data.msg})})).catch((function(e){a({type:V,error:e})}))}},te=function(e){return function(a){return a({type:"cleanvel/products/LOADING"}),v.a.get("".concat(f,"/users/").concat(e)).then((function(e){a({type:"cleanvel/products/SEARCH_USER_SUCCESS",payload:e.data.user})})).catch((function(e){a({type:K,error:e})}))}};function ne(){var e=Object(d.a)(["\ncolor:red;\nfont-size: 15px;\n"]);return ne=function(){return e},e}var re=_.a.div(ne()),le=function(e){var a=e.register,t=e.errors;e.preloadedValues;return r.a.createElement("form",{className:"uk-form-stacked uk-grid-small","uk-grid":"true"},r.a.createElement("div",{className:"uk-margin uk-width-1-2"},r.a.createElement("label",{className:"uk-form-label"},"Nombre:"),r.a.createElement("div",{className:"uk-form-controls"},r.a.createElement("input",{className:"uk-input",type:"text",name:"name",ref:a({required:!0})})),t.name&&r.a.createElement(re,null,"Agregar usuario")),r.a.createElement("div",{className:"uk-margin uk-width-1-2"},r.a.createElement("label",{className:"uk-form-label"},"Apellido:"),r.a.createElement("div",{className:"uk-form-controls"},r.a.createElement("input",{className:"uk-input",type:"text",name:"last_name",ref:a({required:!0})})),t.username&&r.a.createElement(re,null,"Agregar apellido")),r.a.createElement("div",{className:"uk-margin uk-width-1-2"},r.a.createElement("label",{className:"uk-form-label"},"Usuario:"),r.a.createElement("div",{className:"uk-form-controls"},r.a.createElement("input",{className:"uk-input",type:"text",name:"username",ref:a({required:!0})})),t.username&&r.a.createElement(re,null,"Asignar un usuario")),r.a.createElement("div",{className:"uk-margin uk-width-1-2"},r.a.createElement("label",{className:"uk-form-label"},"Contrase\xf1a:"),r.a.createElement("div",{className:"uk-form-controls"},r.a.createElement("input",{className:"uk-input",type:"password",name:"password",placeholder:"minimo de 6 caracteres ",ref:a({required:!0,min:6})})),t.password&&"required"===t.password.type&&r.a.createElement(re,null,"Establer contrase\xf1a"),t.password&&"min"===t.password.type&&r.a.createElement(re,null,"La contrase\xf1a debe tener minimo 6 caracteres")),r.a.createElement("div",{className:"uk-margin uk-width-2-3"},r.a.createElement("label",{className:"uk-form-label"},"Permisos:"),r.a.createElement("div",{className:"uk-form-controls"},r.a.createElement("select",{className:"uk-select",name:"role",ref:a({required:!0})},r.a.createElement("option",null,"Usuario"),r.a.createElement("option",null,"Administrador"))),t.role&&r.a.createElement(re,null,"Asignar permisos")),r.a.createElement("div",{className:"uk-margin uk-width-1-3"},r.a.createElement("label",{className:"uk-form-label"},"Foto de perfil:"),r.a.createElement("div",{className:"uk-form-controls","uk-form-custom":"true"},r.a.createElement("input",{type:"file",name:"profile_picture",ref:a}),r.a.createElement("button",{className:"uk-button uk-button-default",type:"button",tabIndex:"-1"},"Seleccionar..."))))},ce=function(){var e=Object(i.b)(),a=Object(E.a)(),t=a.register,n=a.handleSubmit,l=a.errors;return r.a.createElement("div",null,r.a.createElement("button",{"uk-toggle":"target: #new-user",type:"button",className:"uk-margin-bottom"},"Registrar nuevo usuario"),r.a.createElement("div",{id:"new-user","uk-modal":"true"},r.a.createElement("div",{className:"uk-modal-dialog"},r.a.createElement("button",{className:"uk-modal-close-default",type:"button","uk-close":"true"}),r.a.createElement("div",{className:"uk-modal-header"},r.a.createElement("h2",{className:"uk-modal-title"},"Nuevo usuario")),r.a.createElement("div",{className:"uk-modal-body"},r.a.createElement(le,{register:t,errors:l})),r.a.createElement("div",{className:"uk-modal-footer uk-text-right"},r.a.createElement("button",{className:"uk-button",type:"button",onClick:n((function(a){var t=new FormData;for(var n in a)"profile_picture"===n?t.append(n,a[n][0]):t.append(n,a[n]);e(ae(t))}))},"Guardar")))))},ue=function(){return r.a.createElement("div",{className:"uk-card uk-card-default"},r.a.createElement("div",{className:"uk-card-media-top"},r.a.createElement("img",{className:"uk-align-center",src:"https://res.cloudinary.com/karen491/image/upload/v1594178220/cleanvel/App%20pictures/table-image_zitbkx.jpg",alt:"",width:380})),r.a.createElement("div",{className:"body-card"},r.a.createElement(ce,null)))},se=t(11),me=function(e){e._id;var a=e.data,t=(Object(i.b)(),Object(n.useState)({})),l=Object(se.a)(t,2),c=(l[0],l[1]),u=function(e){var a=e.target.name,t=e.target.files||e.target.value;c((function(e){return Object(p.a)({},e,Object(B.a)({},a,t))}))};return r.a.createElement("div",null,r.a.createElement("form",{className:"uk-form-stacked uk-grid-small","uk-grid":"true"},r.a.createElement("div",{className:"uk-margin uk-width-1-2"},r.a.createElement("label",{className:"uk-form-label"},"Nombre:"),r.a.createElement("div",{className:"uk-form-controls"},r.a.createElement("input",{value:a.name,onChange:u,className:"uk-input",type:"text",name:"name"}))),r.a.createElement("div",{className:"uk-margin uk-width-1-2"},r.a.createElement("label",{className:"uk-form-label"},"Apellido:"),r.a.createElement("div",{className:"uk-form-controls"},r.a.createElement("input",{value:a.last_name,onChange:u,className:"uk-input",type:"text",name:"last_name"}))),r.a.createElement("div",{className:"uk-margin uk-width-1-2"},r.a.createElement("label",{className:"uk-form-label"},"Usuario:"),r.a.createElement("div",{className:"uk-form-controls"},r.a.createElement("input",{value:a.username,onChange:u,className:"uk-input",type:"text",name:"username"}))),r.a.createElement("div",{className:"uk-margin uk-width-2-3"},r.a.createElement("label",{className:"uk-form-label"},"Permisos:"),r.a.createElement("div",{className:"uk-form-controls"},r.a.createElement("select",{className:"uk-select",name:"role",value:a.role,id:"role",onChange:u},r.a.createElement("option",null,"Usuario"),r.a.createElement("option",null,"Administrador")))),r.a.createElement("div",{className:"uk-margin uk-width-1-3"},r.a.createElement("label",{className:"uk-form-label"},"Foto de perfil:"),r.a.createElement("div",{className:"uk-form-controls","uk-form-custom":"true"},r.a.createElement("input",{type:"file",name:"profile_picture"}),r.a.createElement("button",{className:"uk-button uk-button-default",type:"button",tabIndex:"-1"},"Seleccionar...")))))},oe=function(e){var a=e._id,t=Object(i.b)(),n=Object(i.c)((function(e){return e.users.editableUser}));return r.a.createElement("div",null,r.a.createElement("a",{"uk-toggle":"target: #edit-warning",href:"/usuarios",className:"uk-icon-button","uk-icon":"file-edit",type:"button",onClick:function(){t(te(a))}}),r.a.createElement("div",{id:"edit-warning","uk-modal":"true"},n?r.a.createElement("div",{className:"uk-modal-dialog uk-modal-body"},r.a.createElement("h4",null,r.a.createElement("span",{"uk-icon":"icon: warning; ratio: 3"}),n.name," ",n.last_name),r.a.createElement("div",null,r.a.createElement("button",{className:"uk-button uk-button-default",type:"button","uk-toggle":"target: #toggle-usage"},"Editar"),r.a.createElement("div",{id:"toggle-usage",hidden:!0},r.a.createElement(me,{data:n,_id:a}))),r.a.createElement("hr",null),r.a.createElement("p",{className:"uk-text-right"},r.a.createElement("button",{className:"button-nb uk-modal-close",type:"button"},"Cancelar"))):null))},ie=function(e){var a=e._id,t=Object(i.b)(),n=Object(i.c)((function(e){return e.users.editableUser}));return r.a.createElement("div",null,r.a.createElement("a",{"uk-toggle":"target: #delete-warning",href:"/usuarios",className:"uk-icon-button","uk-icon":"trash",type:"button",onClick:function(){t(te(a))}}),r.a.createElement("div",{id:"delete-warning","uk-modal":"true"},n?r.a.createElement("div",{className:"uk-modal-dialog uk-modal-body"},r.a.createElement("h4",null,r.a.createElement("span",{"uk-icon":"icon: warning; ratio: 3"}),"\xbfEstas seguro que deseas eliminar a ".concat(n.name," ").concat(n.last_name," de la base de datos?")),r.a.createElement("hr",null),r.a.createElement("p",{className:"uk-text-right"},r.a.createElement("button",{className:"button-nb uk-modal-close",type:"button"},"Cancelar"),r.a.createElement("button",{className:"button uk-modal-close",type:"button",onClick:function(e){e=n._id,t(function(e){return function(a){return a({type:"cleanvel/products/LOADING"}),v.a.delete("".concat(f,"/users/").concat(e)).then((function(e){a(Z(e.data.user))})).catch((function(e){a(Z(e))}))}}(e))}},"Eliminar usuario"))):null))};function de(){var e=Object(d.a)(["\nborder: 1px solid rgb(214, 207, 207);\n"]);return de=function(){return e},e}function Ee(){var e=Object(d.a)(["\ncolor: rgb(15, 82, 9);\nborder: 1px solid rgb(214, 207, 207);\ntext-transform: capitalize;\nfont-size: 18px;\nfont-weight: 500;\n"]);return Ee=function(){return e},e}function pe(){var e=Object(d.a)(["\ncolor: rgb(8, 4, 46);\n"]);return pe=function(){return e},e}function ke(){var e=Object(d.a)(["\nborder: 2px solid rgb(214, 207, 207); \n"]);return ke=function(){return e},e}function ve(){var e=Object(d.a)(["\nwidth: 40px;\nheight: 40px;\nborder-radius: 40%;\n"]);return ve=function(){return e},e}U.a.extend(I.a);var fe=_.a.img(ve()),be=_.a.table(ke()),ge=_.a.h2(pe()),Ne=_.a.td(Ee()),he=_.a.td(de()),Oe=function(){var e,a=Object(i.b)(),t=Object(i.c)((function(e){return e.users.users}));return Object(n.useEffect)((function(){a(ee())}),[a]),r.a.createElement("div",{className:"uk-flex-middle uk-margin-top","uk-grid":"true"},r.a.createElement(ue,null),r.a.createElement("div",{className:"uk-width-2-3@m uk-height-large","uk-overflow-auto":"true"},r.a.createElement(be,{className:"uk-table uk-table-divider"},r.a.createElement("caption",{className:"uk-margin-right"},r.a.createElement(ge,{className:"uk-text-center"},r.a.createElement("span",null,r.a.createElement("img",{className:"uk-margin-small-right",src:"https://res.cloudinary.com/karen491/image/upload/v1594177958/cleanvel/App%20pictures/users-icon_bihpzi.png",alt:"",width:60})),"Usuarios Cleanvel")),r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{className:"uk-text-center"},r.a.createElement("span",{"uk-icon":"grid"})),r.a.createElement(Ne,null,"Nombre"),r.a.createElement(Ne,null,"Usuario"),r.a.createElement(Ne,null,"Permisos"),r.a.createElement(Ne,null,"Activo desde"),r.a.createElement(Ne,null,"Acciones"))),r.a.createElement("tbody",null,(e=t,Object.values(e)).map((function(e,a){return r.a.createElement("tr",{key:a},r.a.createElement(he,null,r.a.createElement(fe,{className:"uk-preserve-width",src:e.profile_picture,alt:""})),r.a.createElement(he,null,e.name," ",e.last_name),r.a.createElement(he,null,e.username),r.a.createElement(he,null,e.role),r.a.createElement(he,null,U()(e.createdAt).locale("es").format("MMMM YYYY")),r.a.createElement("td",{className:"uk-flex"},r.a.createElement(oe,e),r.a.createElement(ie,e)))}))))))},ye=function(){return r.a.createElement(P.c,null,r.a.createElement(P.a,{exact:!0,path:"/usuarios",component:Oe}))};var Se=function(){return r.a.createElement("div",null,r.a.createElement(J,null),r.a.createElement(ye,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var _e=t(16),we=t(48),je=Object(_e.c)({user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case b:return Object(p.a)({},e,{status:"pending"});case g:return{status:"success",data:Object(p.a)({},a.payload)};case N:return{status:"error",error:a.error};case h:return O;default:return e}},users:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Q,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"cleanvel/products/LOADING":return Object(p.a)({},e,{status:"pending"});case F:return Object(p.a)({},e,{status:"success",users:Object(p.a)({},a.payload)});case H:return Object(p.a)({},e,{status:"error",error:a.error});case"cleanvel/products/CREATE_USER_SUCCESS":return Object(p.a)({},e,{status:"success",users:Object(p.a)({},e.users,Object(B.a)({},a.payload._id,a.payload))});case V:return Object(p.a)({},e,{status:"error",error:a.error});case W:return Object(p.a)({},e,{status:"success",users:Object(p.a)({},e.users,Object(B.a)({},a.payload._id,a.payload))});case X:return Object(p.a)({},e,{status:"error",error:a.error});case"cleanvel/products/DELETE_USER_SUCCESS":return Object(p.a)({},e,{status:"success"});case $:return Object(p.a)({},e,{status:"error",error:a.error});case"cleanvel/products/SEARCH_USER_SUCCESS":return Object(p.a)({},e,{status:"success",editableUser:Object(p.a)({},a.payload)});case K:return Object(p.a)({},e,{status:"error",error:a.error});default:return e}}}),xe=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||_e.d,Ce=Object(_e.e)(je,xe(Object(_e.a)(we.a)));s.a.use(o.a),c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(i.a,{store:Ce},r.a.createElement(C.a,null,r.a.createElement(Se,null)))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[49,1,2]]]);
//# sourceMappingURL=main.3b4609cb.chunk.js.map